<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: components/UserCard.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: components/UserCard.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import {useEffect, useState} from "react";
import profileImg from "../resources/images/profile_img_default.png";
import Button from "react-bootstrap/Button";
import '../resources/css/autocompleteSearchBar.css';
import * as React from "react";
import axios from "axios";
import {createSearchParams, useLocation, useNavigate} from "react-router-dom";

/**
 * simplified component containing user image, username and a follow button
 * @param props
 * @returns {JSX.Element}
 * @constructor
 */
function UserCard(props){
    const navigate = useNavigate();
    const location = useLocation();

    /**
     * {user} user object
     * {followBtn} button that allows a user to follow another user
     */
    const [user, setUser] = useState(props.user);
    const [followBtn, setFollowBtn] = useState(&lt;div>&lt;/div>)

    /**
     * sets the follow button according to user follow status and logged in user
     */
    React.useEffect(() => {
        if(user.user_follow_status === undefined || user.user_id == localStorage.getItem("user-id")) return;
        setFollowBtn((
            user.user_follow_status ?
                &lt;Button className="follow-button following" onClick={()=>follow(false)}>Unfollow&lt;/Button> :
                &lt;Button className="follow-button" onClick={()=>follow(true)}>Follow&lt;/Button>
    ));
    }, [user.user_follow_status]);


    /**
     * sends a query to the server to attempt to follow a user
     * @param follow
     * @returns {Promise&lt;void>}
     */
    const follow = async (follow) =>{
        console.log("follow attempt");
        const response = await axios.post('http://localhost:8080/follow', {
                user_id: user.user_id,
                follow: follow
            },{
            headers:{
                authorization: localStorage.getItem("accessToken")
            }
        });
        console.log(response.data);
        setUser({...user, ['user_follow_status']: response.data.user_follow_status});
    }

    /**
     * onclick navigates to users page
     */
    let navigateToUser = () =>{
        navigate({pathname: '/Account', search: `?${createSearchParams({username: user.username})}`})
    }

    return(
        &lt;div className="user-card-container">
        &lt;div className="user-card-container" style={{width: '100%'}} onClick={navigateToUser}>
            &lt;img  className="post-profile-picture" style={{borderRadius: '50%', width: '36px'}}
                  src={user.profile_img ? user.profile_img : profileImg}
                  onError={({currentTarget}) => {
                      currentTarget.onerror = null;
                      currentTarget.src = profileImg;
                  }}/>
            &lt;h5 className="username-h5">{user.username}&lt;/h5>

            {user.user_id == localStorage.getItem("user-id") &amp;&amp;
            &lt;p className="username-h5">&lt;small>(you)&lt;/small>&lt;/p>}
        &lt;/div>

            {followBtn}
        &lt;/div>
    )
}

export default UserCard;</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="CustomUserSearch.html">CustomUserSearch</a></li><li><a href="DrowDownOptionField.html">DrowDownOptionField</a></li><li><a href="HomePage.html">HomePage</a></li><li><a href="Popup.html">Popup</a></li><li><a href="Post.html">Post</a></li><li><a href="PostForm.html">PostForm</a></li><li><a href="PostPage.html">PostPage</a></li><li><a href="ProfileImageCrop.html">ProfileImageCrop</a></li><li><a href="SignUpForm.html">SignUpForm</a></li><li><a href="UpdateBioForm.html">UpdateBioForm</a></li><li><a href="UserCard.html">UserCard</a></li></ul><h3>Global</h3><ul><li><a href="global.html#Followers">Followers</a></li><li><a href="global.html#Follows">Follows</a></li><li><a href="global.html#Posts">Posts</a></li><li><a href="global.html#verifyJWT">verifyJWT</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.11</a> on Sun Oct 09 2022 11:18:56 GMT+0300 (Itä-Euroopan kesäaika)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
